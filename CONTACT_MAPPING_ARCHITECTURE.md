# Contact Location Mapping - Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          IM HUB - Contact Mapping                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FRONTEND (React + TypeScript)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ContactsPage.tsx                                                        â”‚
â”‚  â”œâ”€â”€ Tab 1: PowerBI Directory (existing)                               â”‚
â”‚  â”œâ”€â”€ Tab 2: Contact Map (NEW) â—„â”€â”€â”€â”€â”€â”€â”€ Main Feature                   â”‚
â”‚  â”‚   â”œâ”€â”€ ContactMap.tsx (Leaflet map component)                        â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Interactive markers (color-coded by type)                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ GeoJSON parish boundaries                                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Popup cards with contact details                          â”‚
â”‚  â”‚   â”‚   â””â”€â”€ Auto-zoom to contacts                                     â”‚
â”‚  â”‚   â”‚                                                                  â”‚
â”‚  â”‚   â”œâ”€â”€ View Modes:                                                   â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Map View (default)                                        â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Cards View (grid)                                         â”‚
â”‚  â”‚   â”‚   â””â”€â”€ Table View (paginated)                                    â”‚
â”‚  â”‚   â”‚                                                                  â”‚
â”‚  â”‚   â”œâ”€â”€ Filters:                                                      â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Sector dropdown                                           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Parish dropdown                                           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Location Type dropdown                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Status dropdown                                           â”‚
â”‚  â”‚   â”‚   â””â”€â”€ Text search                                               â”‚
â”‚  â”‚   â”‚                                                                  â”‚
â”‚  â”‚   â””â”€â”€ Contact Form (add/edit)                                       â”‚
â”‚  â”‚                                                                      â”‚
â”‚  â””â”€â”€ Tab 3: WhatsApp Groups (existing)                                 â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ HTTP/REST API
                               â”‚ (Bearer Token Auth)
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND (FastAPI + Python)                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  main.py - API Endpoints                                                â”‚
â”‚  â”‚                                                                       â”‚
â”‚  â”œâ”€â”€ Contact Endpoints:                                                 â”‚
â”‚  â”‚   â”œâ”€â”€ GET    /api/contacts           (list with filters)           â”‚
â”‚  â”‚   â”œâ”€â”€ POST   /api/contacts           (create)                       â”‚
â”‚  â”‚   â”œâ”€â”€ PUT    /api/contacts/{id}      (update)                       â”‚
â”‚  â”‚   â”œâ”€â”€ DELETE /api/contacts/{id}      (soft delete)                  â”‚
â”‚  â”‚   â””â”€â”€ PATCH  /api/contacts/{id}/restore (restore)                   â”‚
â”‚  â”‚                                                                       â”‚
â”‚  â”œâ”€â”€ GeoJSON Endpoint:                                                  â”‚
â”‚  â”‚   â””â”€â”€ GET /api/geojson/{filename}    (serve boundaries)             â”‚
â”‚  â”‚                                                                       â”‚
â”‚  â””â”€â”€ Existing Endpoints:                                                â”‚
â”‚      â”œâ”€â”€ WhatsApp groups                                                â”‚
â”‚      â”œâ”€â”€ Resources                                                      â”‚
â”‚      â”œâ”€â”€ Sectors                                                        â”‚
â”‚      â””â”€â”€ Authentication                                                 â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ SQLAlchemy ORM
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE (SQLite)                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  database.py - Models                                                   â”‚
â”‚                                                                          â”‚
â”‚  contacts (NEW)                                                         â”‚
â”‚  â”œâ”€â”€ id (PK)                                                            â”‚
â”‚  â”œâ”€â”€ name, organization, position                                      â”‚
â”‚  â”œâ”€â”€ email, phone                                                       â”‚
â”‚  â”œâ”€â”€ sector                                                             â”‚
â”‚  â”œâ”€â”€ parish, community                                                  â”‚
â”‚  â”œâ”€â”€ latitude, longitude                                                â”‚
â”‚  â”œâ”€â”€ location_type (field/remote/office/mobile)                        â”‚
â”‚  â”œâ”€â”€ status (active/inactive/deployed)                                 â”‚
â”‚  â”œâ”€â”€ notes                                                              â”‚
â”‚  â”œâ”€â”€ deleted, approved                                                  â”‚
â”‚  â””â”€â”€ created_at, updated_at                                             â”‚
â”‚                                                                          â”‚
â”‚  whatsapp_groups (existing)                                             â”‚
â”‚  resources (existing)                                                   â”‚
â”‚  contact_submissions (existing)                                         â”‚
â”‚  users (existing)                                                       â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STATIC DATA                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  geojson/                                                               â”‚
â”‚  â””â”€â”€ jamaica-parishes.geojson                                           â”‚
â”‚      â”œâ”€â”€ 14 parish polygons                                             â”‚
â”‚      â”œâ”€â”€ Properties: name, parish_code, type                            â”‚
â”‚      â””â”€â”€ Served via /api/geojson/{filename}                             â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UTILITIES                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  import_contacts.py                                                     â”‚
â”‚  â”œâ”€â”€ Import sample data (10 contacts)                                  â”‚
â”‚  â”œâ”€â”€ Generate CSV template                                              â”‚
â”‚  â””â”€â”€ Import from CSV file                                               â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


DATA FLOW
â•â•â•â•â•â•â•â•â•

1. User Actions (Frontend)
   â”œâ”€â”€ Add Contact
   â”‚   â””â”€â”€ Form â†’ POST /api/contacts â†’ Database
   â”‚
   â”œâ”€â”€ View Map
   â”‚   â”œâ”€â”€ GET /api/contacts â†’ Display markers
   â”‚   â””â”€â”€ GET /api/geojson/jamaica-parishes.geojson â†’ Display boundaries
   â”‚
   â”œâ”€â”€ Filter Contacts
   â”‚   â””â”€â”€ GET /api/contacts?parish=X&location_type=Y â†’ Filtered results
   â”‚
   â””â”€â”€ Edit/Delete
       â”œâ”€â”€ PUT /api/contacts/{id} â†’ Update database
       â””â”€â”€ DELETE /api/contacts/{id} â†’ Soft delete

2. Map Rendering
   â”œâ”€â”€ Load contacts from API
   â”œâ”€â”€ Filter by user criteria
   â”œâ”€â”€ Plot markers on map (color-coded)
   â”œâ”€â”€ Load GeoJSON boundaries
   â”œâ”€â”€ Add interactive popups
   â””â”€â”€ Auto-zoom to fit


MARKER TYPES
â•â•â•â•â•â•â•â•â•â•â•â•â•

Field       â”â”  ðŸŸ¢ Green pin (ðŸ“)  â”â”  Personnel in affected areas
Remote      â”â”  ðŸ”µ Blue pin (ðŸ’»)   â”â”  Working remotely/internationally
Office      â”â”  ðŸ”´ Red pin (ðŸ¢)    â”â”  Based in coordination office
Mobile      â”â”  ðŸŸ  Orange pin (ðŸ“) â”â”  Moving between locations


FILTER LOGIC
â•â•â•â•â•â•â•â•â•â•â•â•â•

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  All Contacts â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                         â”‚
        Apply Filters            View Selection
              â”‚                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚      â”‚                 â”‚
 Sector  Parish  Type  Status  Map  Cards  Table
    â”‚      â”‚      â”‚      â”‚      â”‚     â”‚      â”‚
    â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
              â”‚                         â”‚
              â–¼                         â–¼
      Filtered Results          Display Format


AUTHENTICATION FLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Login â†’ JWT Token â†’ localStorage
                         â”‚
                         â–¼
              All API Requests
         (Authorization: Bearer {token})


DEPLOYMENT STATUS TRACKING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Location Type           Status              Display
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€
field                  active       â†’      ðŸŸ¢ Active in field
field                  deployed     â†’      ðŸŸ¢ Deployed
remote                 active       â†’      ðŸ”µ Remote support
office                 active       â†’      ðŸ”´ Office-based
mobile                 active       â†’      ðŸŸ  Mobile team
*                      inactive     â†’      âšª Temporarily unavailable


DATA IMPORT WORKFLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  CSV/PowerBI Export
         â”‚
         â–¼
  import_contacts.py
         â”‚
         â”œâ”€â”€> Validate data
         â”œâ”€â”€> Format fields
         â””â”€â”€> POST to /api/contacts
                  â”‚
                  â–¼
              Database
                  â”‚
                  â–¼
            Web Interface


FUTURE ENHANCEMENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Geocoding API                         â”‚
â”‚    â””â”€> Auto-convert addresses to coords  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. Marker Clustering                     â”‚
â”‚    â””â”€> Group nearby contacts            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. Heatmap Layer                         â”‚
â”‚    â””â”€> Visualize personnel density       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. Mobile Data Collection App           â”‚
â”‚    â””â”€> Field teams collect GPS          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. Advanced Search                       â”‚
â”‚    â””â”€> Multi-select, saved filters      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
